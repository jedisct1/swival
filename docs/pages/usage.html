<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Usage — Swival</title>
    <meta name="description" content="Usage — Swival documentation">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Usage — Swival">
    <meta property="og:description" content="Usage — Swival documentation">
    <meta property="og:image" content="https://swival.dev/img/logo.png">
    <meta property="og:url" content="https://swival.dev/pages/usage.html">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Usage — Swival">
    <meta name="twitter:description" content="Usage — Swival documentation">
    <meta name="twitter:image" content="https://swival.dev/img/logo.png">
    <link rel="icon" href="../favicon.ico">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="site-header">
        <div class="header-inner">
            <a href="../" class="header-logo">
                <img src="../img/logo.png" alt="Swival">
            </a>
            <nav class="header-nav">
                <a href="./">Docs</a>
                <a href="https://github.com/swival/swival">GitHub</a>
            </nav>
        </div>
    </header>
    <div class="docs-layout">
        <aside class="sidebar">
            <div class="sidebar-section">
<h4>Basics</h4>
<ul>
<li><a href="getting-started.html">Getting Started</a></li>
<li><a href="usage.html" class="active">Usage</a></li>
<li><a href="tools.html">Tools</a></li>
</ul>
</div>
<div class="sidebar-section">
<h4>Configuration & Deployment</h4>
<ul>
<li><a href="safety-and-sandboxing.html">Safety & Sandboxing</a></li>
<li><a href="skills.html">Skills</a></li>
<li><a href="mcp.html">MCP</a></li>
<li><a href="customization.html">Customization</a></li>
<li><a href="providers.html">Providers</a></li>
<li><a href="reports.html">Reports</a></li>
<li><a href="reviews.html">Reviews</a></li>
<li><a href="agentfs.html">AgentFS</a></li>
</ul>
</div>
        </aside>
        <article class="docs-content">
            <h1 id="usage">Usage</h1>
<p>Swival has two operating modes. The default mode is one-shot, where you give the agent a task and let it run to completion. The second mode is an interactive REPL, where conversation history stays live across follow-up prompts.</p>
<h2 id="one-shot-mode">One-Shot Mode</h2>
<p>In one-shot mode, you pass one task on the command line and Swival keeps looping through tool calls until it reaches a final answer or hits the turn limit.</p>
<pre><code class="language-sh">swival &quot;Review this codebase for security issues&quot;
</code></pre>
<p>The final answer is written to standard output. Diagnostics such as turn logs, timing, and tool traces are written to standard error.</p>
<p>If you want a clean output stream for scripting, use <code>--quiet</code> or <code>-q</code>.</p>
<pre><code class="language-sh">swival -q &quot;Summarize the API surface of src/&quot; &gt; api-summary.txt
</code></pre>
<p>You can grant command execution when needed by explicitly whitelisting command names.</p>
<pre><code class="language-sh">swival --allowed-commands ls,git,python3 \
    &quot;Create a tool that returns a random number between 0 and 42&quot;
</code></pre>
<p>That whitelist changes what the agent can do. If <code>python3</code> is available, it can use Python for implementation and verification. If no commands are whitelisted, <code>run_command</code> is unavailable unless you enable YOLO mode.</p>
<p>A successful run exits with code <code>0</code>. A runtime or configuration failure exits with code <code>1</code>. A run that reaches the turn limit before finishing exits with code <code>2</code>.</p>
<h2 id="interactive-mode">Interactive Mode</h2>
<p>REPL mode keeps a shared conversation state, so each new question can build on earlier turns.</p>
<pre><code class="language-sh">swival --repl
</code></pre>
<p>You can also launch the REPL and send an initial question immediately.</p>
<pre><code class="language-sh">swival --repl &quot;Look at the project structure and tell me what this does&quot;
</code></pre>
<p>The REPL is built on <code>prompt-toolkit</code>, so it supports input history, history search, and normal terminal line editing.</p>
<h2 id="repl-commands">REPL Commands</h2>
<p><code>/help</code> prints the command reference in the terminal.</p>
<p><code>/clear</code> drops conversation history back to the initial system state and also resets internal thinking and file-tracking state.</p>
<p><code>/compact</code> compacts older tool output in memory. <code>/compact --drop</code> is more aggressive and also drops middle turns.</p>
<p><code>/add-dir &lt;path&gt;</code> grants read and write access to an additional directory for the current session.</p>
<p><code>/add-dir-ro &lt;path&gt;</code> grants read-only access to an additional directory. The agent can read, list, and grep files there but cannot write, edit, or delete them.</p>
<p><code>/extend</code> doubles the current turn budget. <code>/extend &lt;N&gt;</code> sets the turn budget to an exact value.</p>
<p><code>/continue</code> restarts the agent loop for the existing conversation without adding a new user message.</p>
<p><code>/init</code> runs a three-pass workflow that scans your project and generates an <code>AGENTS.md</code> file.</p>
<p><code>/exit</code> and <code>/quit</code> leave the REPL. Pressing <code>Ctrl-D</code> exits as well.</p>
<h2 id="cli-flags">CLI Flags</h2>
<h3 id="model-and-provider-flags">Model And Provider Flags</h3>
<p><code>--provider</code> chooses the backend provider and defaults to <code>lmstudio</code>. Valid values are <code>lmstudio</code>, <code>huggingface</code>, and <code>openrouter</code>.</p>
<p><code>--model</code> overrides auto-discovery with a fixed model identifier.</p>
<p><code>--base-url</code> sets a custom API base URL. For LM Studio, the default base URL is <code>http://127.0.0.1:1234</code> when <code>--base-url</code> is not set.</p>
<p><code>--api-key</code> provides a key directly on the command line and takes precedence over provider environment variables such as <code>HF_TOKEN</code> or <code>OPENROUTER_API_KEY</code>.</p>
<h3 id="behavior-tuning-flags">Behavior Tuning Flags</h3>
<p><code>--max-turns</code> sets the maximum number of loop iterations and defaults to <code>100</code>.</p>
<p><code>--max-output-tokens</code> sets the model output budget per call and defaults to <code>32768</code>.</p>
<p><code>--max-context-tokens</code> requests a context window size. With LM Studio, this may trigger a model reload.</p>
<p><code>--temperature</code> controls sampling temperature and defaults to the provider default when omitted.</p>
<p><code>--top-p</code> controls nucleus sampling and defaults to <code>1.0</code>.</p>
<p><code>--seed</code> passes a random seed for providers that support reproducible sampling.</p>
<p><code>--proactive-summaries</code> enables periodic checkpoint summarization of the conversation. Every ten turns, recent turns are summarized and stored internally. These summaries survive context compaction and give the model a condensed record of earlier work that would otherwise be lost.</p>
<p>Useful for long-running sessions.</p>
<h3 id="sandboxing-flags">Sandboxing Flags</h3>
<p><code>--base-dir</code> defines the base directory for file tools and defaults to the current directory.</p>
<p><code>--allowed-commands</code> enables command execution through a comma-separated whitelist.</p>
<p><code>--add-dir</code> grants read and write access to additional directories and can be repeated.</p>
<p><code>--add-dir-ro</code> grants read-only access to additional directories and can be repeated. The agent can read, list, and grep files in these directories but cannot write, edit, or delete them.</p>
<p><code>--yolo</code> disables both filesystem sandbox checks and command whitelisting, except that filesystem root access is still blocked.</p>
<p><code>--no-read-guard</code> disables the read-before-write guard that normally prevents editing existing files before reading them.</p>
<h3 id="system-prompt-and-instruction-flags">System Prompt And Instruction Flags</h3>
<p><code>--system-prompt</code> replaces the built-in prompt with your own prompt text.</p>
<p><code>--no-system-prompt</code> omits the system message entirely.</p>
<p><code>--no-instructions</code> prevents loading <code>CLAUDE.md</code> and <code>AGENTS.md</code> from both the base directory and the user config directory.</p>
<p><code>--system-prompt</code> and <code>--no-system-prompt</code> are mutually exclusive.</p>
<h3 id="skills-flags">Skills Flags</h3>
<p><code>--skills-dir</code> adds external skill directories and can be passed more than once.</p>
<p><code>--no-skills</code> disables skill discovery and removes the <code>use_skill</code> tool path.</p>
<h3 id="mcp-flags">MCP Flags</h3>
<p><code>--no-mcp</code> disables MCP server connections entirely, even if servers are configured in <code>swival.toml</code> or <code>.mcp.json</code>.</p>
<p><code>--mcp-config FILE</code> provides an explicit path to an MCP JSON config file. When set, this replaces the default <code>.mcp.json</code> lookup in the project root.</p>
<p>See <a href="mcp.html">MCP</a> for full configuration details.</p>
<h3 id="output-and-reporting-flags">Output And Reporting Flags</h3>
<p><code>--quiet</code> and <code>-q</code> suppress diagnostics and keep terminal output focused on final answers.</p>
<p><code>--report FILE</code> writes a JSON run report to <code>FILE</code>. This flag is incompatible with <code>--repl</code>.</p>
<p><code>--reviewer COMMAND</code> runs an external reviewer after each answer. The command string is shell-split, so you can pass arguments inline (e.g. <code>--reviewer "swival --reviewer-mode"</code>). This flag is incompatible with <code>--repl</code>.</p>
<p><code>--max-review-rounds N</code> limits how many times the reviewer can request retries and defaults to <code>5</code>. Set to <code>0</code> to accept the first answer without retries.</p>
<p><code>--reviewer-mode</code> runs Swival as a reviewer process that speaks the reviewer protocol. It reads <code>base_dir</code> from the positional argument, the answer from standard input, evaluates with the LLM, and exits 0 (accept), 1 (retry), or 2 (error). Incompatible with <code>--repl</code> and <code>--reviewer</code>.</p>
<p><code>--review-prompt TEXT</code> appends custom instructions to the built-in review prompt when running in reviewer mode.</p>
<p><code>--objective FILE</code> reads the task description from a file instead of the <code>SWIVAL_TASK</code> environment variable when running in reviewer mode.</p>
<p><code>--verify FILE</code> reads verification criteria from a file and includes them in the review prompt when running in reviewer mode.</p>
<p><code>--no-history</code> disables writes to <code>.swival/HISTORY.md</code>.</p>
<p><code>--color</code> forces ANSI color on standard error, and <code>--no-color</code> disables ANSI color even on TTY output.</p>
<h3 id="configuration-flags">Configuration Flags</h3>
<p><code>--init-config</code> generates a global config file at <code>~/.config/swival/config.toml</code> and exits. The file is a fully commented template showing all available settings.</p>
<p><code>--init-config --project</code> generates a project-local config file at <code>swival.toml</code> in the current base directory instead.</p>
<p>Neither flag requires a question argument. Both refuse to overwrite an existing config file.</p>
<p>For the full report schema and analysis workflow, see <a href="reports.html">Reports</a>. For the reviewer protocol and examples, see <a href="reviews.html">Reviews</a>.</p>
        </article>
    </div>
    <footer class="site-footer">
        MIT License &middot;
        <a href="https://github.com/swival/swival">GitHub</a>
    </footer>
</body>
</html>